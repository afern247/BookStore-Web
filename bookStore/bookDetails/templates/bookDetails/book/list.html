<!-- Inherit from the bookDetails' base.html -->
{% extends "bookDetails/base.html" %}
<!-- Load crispy forms functionality -->
{% load crispy_forms_tags %}
<!-- Load from static folder -->
{% load static %}

{% block title %}
    <h1 style="text-align:center">
        BOOKSTORE
    </h1>
{% endblock %}

{% block content %}
    <div id="sidebar">
        <h3>Authors</h3>
        <ul>
            <!-- If no author was specified, print every
             author's name and a link to their page -->
        <li {% if not author %}class="selected"{% endif %}>
            <a href="{% url "bookDetails:book_list" %}">All</a>
        </li>
            <!-- Otherwise, an author must have been specified,
            so iterate through the set of all authors, looking for
            the one whose slug matches the specified author's, then
            print all their books' URLs and names -->
        {% for current in authors %}
            <li {% if author.slug == current.slug %}class="selected"{% endif %}>
                <a href="{{ current.get_absolute_url }}">{{ current.author_name }}</a>
            </li>
        {% endfor %}
        </ul>
    </div>

    <!-- If an author was specified, print all their books. Otherwise,
    print all books -->
    <div id="main" class="book-list">
        <h1>
            {% if author %}
            <a href="{{ author.get_absolute_url }}">Books by {{ author.author_name }}</a>
            {% else %}All Books{% endif %}
        </h1>
        {% for book in books %}
            <div class="item">
                <a href="{{ book.get_absolute_url }}">
                    <img src="{% if book.book_cover %}{{ book.book_cover.url }}
                    {% else %}NO IMAGE{% endif %}">
                </a>
                <br>
                <h2><a href="{{ book.get_absolute_url }}">{{ book.book_name }}</a></h2>
                <br>
                PRICE: ${{ book.price }}
                <br>
                RATING: {{ book.avg_rating }}
                <br>
                GENRE: {{ book.book_genre }}
                <br>
                DESCRIPTION: {{ book.book_description }}
                <br>
                PUBLISHING INFO: {{ book.publishing_info }}
                <br>
                <br>
            </div>
        {% endfor %}
    </div>
{% endblock %}