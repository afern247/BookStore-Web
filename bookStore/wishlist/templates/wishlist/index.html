<!-- This is saying: inherit everything from __base.html -->
<!DOCTYPE html>
{% extends "../storePage/partials/__base.html" %}

<!-- The code from the index page that will be added to the __base template -->
{% block body %}
<head>
    <style>
        .alignLeft{
            float: left;
        }
        .alignRight{
            float: right;
        }
        .lists{
            height: 100px;
            width: 30%;
        }
    </style>
</head>
<body>
    <!-- Delete Start -->
    <b>Testing:</b>
    <!--
    <p>Leave this here for testing. Delete later.</p>
    <p>num_of_lists: {{ num_of_lists }}</p>
    <p>user.username: {{ user.username }}</p>
    {% for list in all_lists %}
        <ul>
            <l1>Username: {{ list.user.user.username }}
                List Name: {{ list.name }}
                List Number: {{ list.list_num }}</l1>
        </ul>
    {% endfor %}
    -->
    {% for list in all_lists %}
        {% if list.user.user.username == user.username %}
            <p>list.name: {{ list.name }} list.books.all.count: {{ list.books.all.count }}</p>
        {% endif %}
    {% endfor %}
    <!-- Delete Stop -->
    <div class="container">
        <div>
            <div class="alignLeft">
                <h1>{{ user.username }}'s Wishlists</h1>
            </div>
            <div class="alignRight">
                <form method="post">
                {% csrf_token %}
                    <div id="newList">
                        <input id="listName" type="text" placeholder="Enter List Name Here" maxlength="25" required>
                        <button type="submit" class="btn btn-outline-success">Create List</button>
                    </div>
                    <div id="noNewList">
                        <button class="btn btn-outline-secondary" disabled>Create List</button>
                    </div>
                </form>
            </div>
        </div>
        <br><br>
        <hr>
        <div>
            <div id="noLists">
                <h1>You do not have any wishlists. Please create one.</h1>
            </div>
            <div id="listContent">
                <div class="alignLeft lists">
                <table align="center" cellspacing="10" cellpadding="10" width="80%">
                    {% for list in all_lists %}
                           {% if list.user.user.username == user.username %}
                               <tr>
                                   <td><a href=""><h3>{{ list.name }}</h3></a></td>
                               </tr>
                           {% endif %}
                    {% endfor %}
                </table>
            </div>
            <div class="alignLeft">
                <table align="center" cellspacing="10" cellpadding="20" width=>
                    <!-- <tr>
                        <th>Book Name</th>
                        <th>Author Name</th>
                        <th>Book Price</th>
                    </tr>
                    {# for book in all_books #}
                        <tr>
                            <td>{{ book.name }}</td>
                            <td>{{ book.author_name }}</td>
                            <td>{{ book.price }}</td>
                        </tr>
                    {# endfor #} -->
                </table>
            </div>
            </div>

        </div>
    </div><!--Container closed-->
</body>
    <script>
        let countOfUserLists = 0;

        //function to count the number of lists based on the user
        function checkNumOfLists() {
            {% for list in all_lists %}
                {% if list.user.user.username == user.username %}
                    countOfUserLists++;
                {% endif %}
            {% endfor %}
        }

        //function to display the create list button based on how many lists the user has.
        //Also will display a message when no lists exists.
        function createList(){
            let x = document.getElementById("newList");
            let y = document.getElementById("noNewList");
            let a = document.getElementById("listContent");
            let b = document.getElementById("noLists");
            if (countOfUserLists == 0){
                a.style.display = "none";
                y.style.display = "none";
            }
            else if (countOfUserLists > 2){
                x.style.display = "none";
                b.style.display = "none";
            }
            else {
                y.style.display = "none";
                b.style.display = "none";
            }
        }

        checkNumOfLists();
        createList();
        console.log('Count of Lists for this User: ' + countOfUserLists);
    </script>
{% endblock %}
